<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>üíñ Ch√∫c c√¥ng ch√∫a c·ªßa anh 20/10 vui v·∫ª üíñ</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    height: 100%;
    background: radial-gradient(circle at 50% 30%, #240010, #000);
  }
  canvas {
    display: block;
  }
  .title {
    position: absolute;
    top: 10%;
    width: 100%;
    text-align: center;
    font-size: 2.4em;
    color: #ffdff0;
    font-family: 'Comic Sans MS', cursive;
    text-shadow: 0 0 10px #ff99bb, 0 0 20px #ff66aa;
  }
  .footer {
    position: absolute;
    bottom: 5%;
    width: 100%;
    text-align: center;
    color: #ffdff0;
    font-family: 'Comic Sans MS', cursive;
    font-size: 1.2em;
    text-shadow: 0 0 10px #ff99bb;
  }
</style>
</head>
<body>
<div class="title">üíñ Ch√∫c c√¥ng ch√∫a c·ªßa anh 20/10 vui v·∫ª üíñ</div>
<div class="footer"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(45, innerWidth / innerHeight, 0.1, 1000);
let renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);

// üíó √Ånh s√°ng d·ªãu nh·∫π + √°nh s√°ng m√¥i tr∆∞·ªùng
let light = new THREE.PointLight(0xff88bb, 1.3);
light.position.set(10, 10, 25);
scene.add(light);
const ambient = new THREE.AmbientLight(0xff99cc, 0.4);
scene.add(ambient);

// üå∏ T·∫°o tr√°i tim
const geometry = new THREE.BufferGeometry();
const positions = [];
const PARTICLE_COUNT = 9000;
for (let i = 0; i < PARTICLE_COUNT; i++) {
  const t = Math.random() * Math.PI * 2;
  const z = (Math.random() - 0.5) * 1.5;
  const x = 16 * Math.pow(Math.sin(t), 3);
  const y = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t);
  positions.push(x * 0.22, (y + 2) * 0.22, z * 0.22);
}
geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));

const material = new THREE.PointsMaterial({
  color: 0xff99cc,
  size: 0.25,
  transparent: true,
  opacity: 0.9
});
material.emissive = new THREE.Color(0xff66aa);
material.emissiveIntensity = 0.4;

const heart = new THREE.Points(geometry, material);
scene.add(heart);

// üåü Sparkles lung linh
const sparklesGeometry = new THREE.BufferGeometry();
const sparklesPositions = [];
for (let i = 0; i < 1000; i++) {
  sparklesPositions.push(
    (Math.random() - 0.5) * 25,
    (Math.random() - 0.5) * 25,
    (Math.random() - 0.5) * 25
  );
}
sparklesGeometry.setAttribute('position', new THREE.Float32BufferAttribute(sparklesPositions, 3));
const sparklesMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.03, opacity: 0.8, transparent: true });
const sparkles = new THREE.Points(sparklesGeometry, sparklesMaterial);
scene.add(sparkles);

// ‚ú® ƒêom ƒë√≥m / sao r∆°i
const firefliesGeometry = new THREE.BufferGeometry();
const firefliesPositions = [];
for (let i = 0; i < 100; i++) {
  firefliesPositions.push((Math.random() - 0.5) * 15, Math.random() * 8, (Math.random() - 0.5) * 15);
}
firefliesGeometry.setAttribute('position', new THREE.Float32BufferAttribute(firefliesPositions, 3));
const firefliesMaterial = new THREE.PointsMaterial({ color: 0xffccff, size: 0.08, transparent: true, opacity: 0.7 });
const fireflies = new THREE.Points(firefliesGeometry, firefliesMaterial);
scene.add(fireflies);

// üíû Camera
camera.position.set(0, 0, 18);
camera.lookAt(0, 0, 0);

// üåà Animation
let clock = new THREE.Clock();
function animate() {
  requestAnimationFrame(animate);
  const t = clock.getElapsedTime();

  const beat = 1 + 0.12 * Math.sin(t * 6);
  heart.scale.set(beat, beat, beat);
  material.opacity = 0.8 + 0.2 * Math.sin(t * 6);

  heart.rotation.y = t * 0.25;
  heart.rotation.x = Math.sin(t * 0.3) * 0.07;

  sparkles.rotation.y = t * 0.08;
  fireflies.rotation.y = t * 0.1;
  fireflies.position.y = Math.sin(t * 0.8) * 0.3;

  // üí¨ Hi·ªáu ·ª©ng ch·ªØ bay kh·∫Øp m√†n h√¨nh
  if (Math.floor(t * 2) % 6 === 0 && Math.random() < 0.04) {
    createFloatingText();
  }

  renderer.render(scene, camera);
}
animate();

// üéÄ H√†m t·∫°o ch·ªØ bay
function createFloatingText(x, y) {
  let msg = document.createElement("div");
  msg.textContent = "üíû Anh y√™u m√¨nh üíû";
  msg.style.position = "absolute";
  msg.style.left = (x ?? Math.random() * window.innerWidth) + "px";
  msg.style.top = (y ?? Math.random() * window.innerHeight) + "px";
  msg.style.color = "#ffb6c1";
  msg.style.fontFamily = "Comic Sans MS";
  msg.style.fontSize = (Math.random() * 1 + 1.2) + "em";
  msg.style.opacity = 1;
  msg.style.transition = "all 3s ease-out";
  msg.style.pointerEvents = "none";
  msg.style.textShadow = "0 0 10px #ff99cc, 0 0 20px #ff66aa";
  document.body.appendChild(msg);
  setTimeout(() => {
    msg.style.top = (parseFloat(msg.style.top) - 80) + "px";
    msg.style.opacity = 0;
    setTimeout(() => msg.remove(), 3000);
  }, 50);
}

// üì± Responsive
addEventListener('resize', () => {
  camera.aspect = innerWidth / innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
});

// üíó Khi ch·∫°m/click v√†o m√†n h√¨nh, hi·ªán ch·ªØ bay l√™n v·ªã tr√≠ ch·∫°m
document.body.addEventListener('click', e => {
  createFloatingText(e.clientX, e.clientY);
});

// üéµ Nh·∫°c n·ªÅn YouTube (gi·ªØ nguy√™n)
let player, started = false;
function onYouTubeIframeAPIReady() {
  player = new YT.Player('player', {
    height: '0',
    width: '0',
    videoId: 'IOe0tNoUGv8',
    playerVars: { autoplay: 1, loop: 1, playlist: 'IOe0tNoUGv8' },
    events: { onReady: e => e.target.playVideo() }
  });
}
let tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
document.body.appendChild(tag);

document.body.addEventListener('click', () => {
  if (!started && player && player.playVideo) {
    player.playVideo();
    started = true;
  }
});
</script>
<div id="player"></div>
</body>
</html>
