<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>💖 Anh yêu công chúa của anh 💖</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    height: 100%;
    background: radial-gradient(circle at 50% 30%, #240010, #000);
  }
  canvas {
    display: block;
  }
  .title {
    position: absolute;
    top: 10%;
    width: 100%;
    text-align: center;
    font-size: 2.4em;
    color: #ffdff0;
    font-family: 'Comic Sans MS', cursive;
    text-shadow: 0 0 10px #ff99bb, 0 0 20px #ff66aa;
  }
  .footer {
    position: absolute;
    bottom: 5%;
    width: 100%;
    text-align: center;
    color: #ffdff0;
    font-family: 'Comic Sans MS', cursive;
    font-size: 1.2em;
    text-shadow: 0 0 10px #ff99bb;
  }
</style>
</head>
<body>
<div class="title">💖 Anh yêu công chúa của anh 💖</div>
<div class="footer">💫 Nhịp tim này chỉ dành cho em 💫</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(45, innerWidth / innerHeight, 0.1, 1000);
let renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);

// 💗 Ánh sáng dịu nhẹ
let light = new THREE.PointLight(0xff88bb, 1.3);
light.position.set(10, 10, 25);
scene.add(light);

// 🌸 Tạo trái tim to và cân đối hơn
const geometry = new THREE.BufferGeometry();
const positions = [];
const PARTICLE_COUNT = 9000;
for (let i = 0; i < PARTICLE_COUNT; i++) {
  const t = Math.random() * Math.PI * 2;
  const z = (Math.random() - 0.5) * 1.5; // giảm chiều sâu nhẹ
  const x = 16 * Math.pow(Math.sin(t), 3);
  const y = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t);
  positions.push(x * 0.22, (y + 2) * 0.22, z * 0.22); // tăng tỷ lệ từ 0.1 → 0.22
}
geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));

const material = new THREE.PointsMaterial({
  color: 0xff99cc,
  size: 0.25, // hạt to hơn
  transparent: true,
  opacity: 0.9
});
const heart = new THREE.Points(geometry, material);
scene.add(heart);

// 🌟 Sparkles lung linh
const sparklesGeometry = new THREE.BufferGeometry();
const sparklesPositions = [];
for (let i = 0; i < 1000; i++) {
  sparklesPositions.push(
    (Math.random() - 0.5) * 25,
    (Math.random() - 0.5) * 25,
    (Math.random() - 0.5) * 25
  );
}
sparklesGeometry.setAttribute('position', new THREE.Float32BufferAttribute(sparklesPositions, 3));
const sparklesMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.03, opacity: 0.8, transparent: true });
const sparkles = new THREE.Points(sparklesGeometry, sparklesMaterial);
scene.add(sparkles);

// 💞 Căn chỉnh camera và render
camera.position.set(0, 0, 18); // gần hơn cho to rõ hơn
camera.lookAt(0, 0, 0);

// 🌈 Animation: nhịp tim và lấp lánh
let clock = new THREE.Clock();
function animate() {
  requestAnimationFrame(animate);
  const t = clock.getElapsedTime();

  const beat = 1 + 0.12 * Math.sin(t * 6); // nhịp tim mạnh hơn, mượt
  heart.scale.set(beat, beat, beat);

  heart.rotation.y = t * 0.25;
  heart.rotation.x = Math.sin(t * 0.3) * 0.07;

  sparkles.rotation.y = t * 0.08;

  renderer.render(scene, camera);
}
animate();

// 📱 Responsive
addEventListener('resize', () => {
  camera.aspect = innerWidth / innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
});

// 🎵 Nhạc nền YouTube
let player, started = false;
function onYouTubeIframeAPIReady() {
  player = new YT.Player('player', {
    height: '0',
    width: '0',
    videoId: 'IOe0tNoUGv8',
    playerVars: { autoplay: 1, loop: 1, playlist: 'IOe0tNoUGv8' },
    events: { onReady: e => e.target.playVideo() }
  });
}
let tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
document.body.appendChild(tag);

document.body.addEventListener('click', () => {
  if (!started && player && player.playVideo) {
    player.playVideo();
    started = true;
  }
});
</script>
<div id="player"></div>
</body>
</html>
